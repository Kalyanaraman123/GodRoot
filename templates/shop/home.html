{% extends "base.html" %}
{% load static %}

{% block title %}TIMEO — Home{% endblock %}

{% block content %}
<div class="content-container">
  <!-- HERO -->
  <section class="hero">
    <div class="hero-left">
      <h1>Modern wardrobe essentials — refined</h1>
      <p class="muted">Black, white and grey staples made with premium fabrics. Free delivery on orders over ₹999.</p>
      <div class="hero-cta">
        <a class="btn-primary" href="#collections">Shop Collections</a>
      </div>
    </div>
    <div class="hero-right">
      <img src="https://picsum.photos/900/600?random=12" alt="Hero image">
    </div>
  </section>

  <!-- COLLECTIONS -->
  <section id="collections" class="collections">
    <div class="col-card">
      <img src="https://picsum.photos/1200/900?random=21" alt="Collection 1">
      <div class="cap">Men's Collection</div>
    </div>
    <div class="col-card">
      <img src="https://picsum.photos/1200/900?random=22" alt="Collection 2">
      <div class="cap">Women's Collection</div>
    </div>
  </section>

  <!-- PRODUCTS GRID - 4 per row, ABSOLUTELY NO MARGINS -->
  <section class="products">
    <h2>Featured Products</h2>
    <div class="products-grid">
      {% for p in products %}
        {% with first_variant=p.variants.all|first %}
        <article class="card" data-id="{{ p.id }}" data-title="{{ p.title|escapejs }}">
          <div class="media">
            {% if p.images.all %}
              <img src="{{ p.images.all.0.image.url }}" alt="{{ p.title }}">
            {% else %}
              <img src="https://picsum.photos/800/800?random={{ forloop.counter }}" alt="{{ p.title }}">
            {% endif %}
          </div>
          <div class="body">
            <h3>{{ p.title }}</h3>
            {% if first_variant %}
              <div class="price">₹{{ first_variant.price }}</div>
            {% else %}
              <div class="price">—</div>
            {% endif %}
            <div class="muted sizes">
              {% if p.variants.exists %}
                Sizes:
                {% for v in p.variants.all %}
                  {{ v.size }}{% if not forloop.last %} •{% endif %}
                {% endfor %}
              {% else %}
                —
              {% endif %}
            </div>

            <div class="card-actions">
              <a class="small-btn" href="{% url 'shop:product_detail' p.slug %}">View</a>
              {% if first_variant %}
                <form method="post" action="{% url 'shop:cart_add' first_variant.id %}" class="inline-form">
                  {% csrf_token %}
                  <input type="hidden" name="quantity" value="1">
                  <button class="small-btn" type="submit">Add</button>
                </form>
              {% endif %}
            </div>
          </div>
        </article>
        {% endwith %}
      {% empty %}
        <div class="muted" style="grid-column: 1 / -1; text-align: center; padding: 40px;">No products available.</div>
      {% endfor %}
    </div>
  </section>
</div>

<!-- FOOTER -->
<footer class="site-footer" role="contentinfo">
  <div class="footer-inner">
    <div class="footer-grid">
      <div class="col">
        <h4>Shop</h4>
        <ul>
          <li><a href="#">Mens</a></li>
          <li><a href="#">T-Shirt</a></li>
          <li><a href="#">Hoodies</a></li>
          <li><a href="#">Shirt</a></li>
        </ul>
      </div>

      <div class="col">
        <h4>Informations</h4>
        <ul>
          <li><a href="#">Track Order</a></li>
          <li><a href="#">Returns Policy</a></li>
          <li><a href="#">Privacy Policy</a></li>
          <li><a href="#">Terms and Conditions</a></li>
        </ul>
      </div>

      <div class="col">
        <h4>Account</h4>
        <ul>
          <li><a href="{% url 'shop:cart' %}">Cart</a></li>
          <li><a href="#">My account</a></li>
          <li><a href="#">My orders</a></li>
          <li><a href="#">Wishlist</a></li>
        </ul>
      </div>

      <div class="col">
        <h4>Follow us</h4>
        <ul class="social">
          <li><a href="#">Instagram</a></li>
          <li><a href="#">Facebook</a></li>
          <li><a href="#">Youtube</a></li>
        </ul>
      </div>

      <div class="col contact-col">
        <h4>Contact</h4>
        <p>127, Palam Station Road, Goripalayam, Madurai-2<br>
        +91 63812 65402<br>
        contact@timeo.co.in</p>
      </div>
    </div>

    <div class="footer-bottom">
      © TIMEO Demo — All rights reserved
    </div>
  </div>
</footer>
{% endblock %}